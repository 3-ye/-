<!doctype html>
<html>

    <head>
        <meta charset="utf-8">
        <title></title>
        <meta name="viewport"
            content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
        <link href="../../css/mui.min.css" rel="stylesheet" />
    </head>

    <body>
        <header class="mui-bar mui-bar-nav">
            <a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
            <h1 class="mui-title">新闻详情</h1>
        </header>
        <div class="mui-content">
            <div id="content" style="padding: 10px;">
                
            </div>
        </div>

        <script src="../../js/mui.min.js"></script>
        <script type="text/javascript">
            mui.init()
            var baseUrl = 'http://124.93.196.45:10001'
            var news_id = localStorage.getItem('news_id');

            function getNetWork() {
                mui.get(baseUrl + `/prod-api/press/press/${news_id}`, {}, function(data) {
                    let content = document.getElementById('content');
                    //有的新闻详情内容是有图片的这些图片需要加上IP地址才能显示，这里使用replace+正则替换添加
                    data.data.content = data.data.content.replace(/<img src="\//g, `<img style="width: 100%; height: 250px" src="${baseUrl}/`);
                    content.innerHTML = `
                        <h4 style="margin-bottom: 10px; text-align: center; line-height: 25px;">${data.data.title}</h4>
                        <div style="margin-bottom: 10px; display: flex; justify-content: space-between;">
                            <p>发布时间：${data.data.publishDate}</p>
                            <p>阅读人数：${data.data.readNum}</p>
                        </div>
                        <img src="${baseUrl + data.data.cover}" width="100%" height="250px" style="border-radius: 5px;" />
                        <div style="margin-top: 10px;">${data.data.content}</div>
                    `
                });
            }
            getNetWork();
        </script>
    </body>

</html>
